<!DOCTYPE html>
<html>
    <head>
        <title>Joe's Hot Dog Stand</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="styles.css" />
        <link rel="icon" href="logo-min.png" />
    </head>
    
    <body>
        <script>
            // Setup/constants
            const PRICE_DOGS  = 4.80;
            const PRICE_FRIES = 3.95;
            const PRICE_SODA  = 1.99;
            const MEALS_TAX   = 0.0625;

            /**
             * Converts an amount (float) to a string containing the amount
             * rounded to exactly two decimal places.
             */
             const showMoney = (amount) => {
                // Round to the nearest cent
                amount = Math.round(amount * 100) / 100;

                // Check if integer or decimal
                asString = amount + "";
                decimalIndex = asString.indexOf(".");

                if(decimalIndex === -1)
                    return asString + ".00";
                return (asString + "00").slice(0, decimalIndex + 3)
            }

            // User input
            const numDogs  = parseInt(prompt("Enter number of hot dogs: "));
            const numFries = parseInt(prompt("Enter number of french fries: "));
            const numSoda  = parseInt(prompt("Enter number of sodas: "));

            // Calculation
            const totalDogs  = PRICE_DOGS  * numDogs;
            const totalFries = PRICE_FRIES * numFries;
            const totalSoda  = PRICE_SODA  * numSoda;
            const subtotal   = totalDogs + totalFries + totalSoda;

            // Discount is signed
            const discount = (subtotal >= 25) ? subtotal * -0.1 : 0;
            const subtotalAfterDiscount = subtotal + discount;

            const tax   = subtotal * MEALS_TAX;
            const total = subtotal + tax;
        </script>

        <main>
            <h1>Joe's Hot Dog Stand</h1>
            <table>
                <!-- Header row -->
                <tr>
                    <th>Item</th>
                    <th>Quantity ordered</th>
                    <th>Item cost (total)</th>
                </tr>
                
                <!-- Item rows -->
                <tr>
                    <td>
                        Hot dogs
                    </td>
                    <script>
                        document.write("<td>" + numDogs + "</td>"
                                     + "<td>" + showMoney(totalDogs) + "</td>");
                    </script>
                </tr>
                
                <tr>
                    <td>
                        Fries
                    </td>
                    <script>
                        document.write("<td>" + numFries + "</td>"
                                     + "<td>" + showMoney(totalFries) + "</td>");
                    </script>
                </tr>
                
                <tr>
                    <td>
                        Soda
                    </td>
                    <script>
                        document.write("<td>" + numSoda + "</td>"
                                     + "<td>" + showMoney(totalSoda) + "</td>");
                    </script>
                </tr>

                <!-- Subtotal row -->
                <tr>
                    <td>
                        Subtotal
                    </td>
                    <!-- Dummy cell, N/A -->
                    <td></td>
                    <script>
                        document.write("<td>" + showMoney(subtotal) + "</td>");
                    </script>
                </tr>

                <!-- Discount row, new subtotal row (if applicable) -->
                <script>
                    if(discount !== 0) {
                        document.write(
                            `
                            <tr>
                                <td>Discount</td>
                                <td></td>
                                <td>${showMoney(discount)}</td>
                            </tr>
                            <tr>
                                <td>Subtotal after discount</td>
                                <td></td>
                                <td>${showMoney(subtotalAfterDiscount)}</td>
                            </tr>
                            `
                        )
                    }
                </script>
            </table>
        </main>
    </body>
</html>
